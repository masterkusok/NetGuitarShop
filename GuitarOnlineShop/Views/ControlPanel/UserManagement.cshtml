@model (IEnumerable<GuitarStoreUser>, IEnumerable<GuitarStoreUser>)
@{
	ViewBag.PageTitle = "User management";
	ViewBag.FooterEnabled = false;
}

<div class="text-center w-100 text-light" style="margin-top:15vh ">
	<h3 class="text-danger">@TempData["message"]</h3>
	<h2>User list</h2>
	<h5 class="mt-5">Moderators:</h5>
	@if (Model.Item1.Any())
	{
		<table class="mt-3 table table-dark table-striped table-borderless">
			<thead>
				<tr>
					<th>Id</th>
					<th>Username</th>
					<th>Email</th>
					<th>Email status</th>
					<th>Role actions</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var user in Model.Item1)
				{
					<tr>
						<th>@user.Id</th>
						<th>@user.UserName</th>
						<th>@user.Email</th>
						<th>@(user.EmailConfirmed ? "Confirmed" : "Not confirmed")</th>
						<th>
							Is actual moderator - <a class="btn btn-warning" asp-action=SwitchUserRole
							asp-route-id=@user.Id asp-route-role=User>Demote to regular user</a>
						</th>
						<th>
							<a class="btn btn-danger" asp-action=DeleteUser asp-route-id=@user.Id>Delete user</a>
						</th>
					</tr>
				}
			</tbody>
		</table>
	}
	else
	{
		<h5>No actual moderators</h5>
	}
	<h5 class="mt-5">Non-Moderators:</h5>
	@if (Model.Item2.Any())
	{
		<table class="mt-3 table table-dark table-striped table-borderless">
			<thead>
				<tr>
					<th>Id</th>
					<th>Username</th>
					<th>Email</th>
					<th>Email status</th>
					<th>Role actions</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var user in Model.Item2)
				{
					<tr>
						<th>@user.Id</th>
						<th>@user.UserName</th>
						<th>@user.Email</th>
						<th>@(user.EmailConfirmed ? "Confirmed" : "Not confirmed")</th>
						<th>
							Not an actual moderator - <a class="btn btn-warning" asp-action=SwitchUserRole
							asp-route-id=@user.Id asp-route-role=Moderator>Promote to moderator</a>
						</th>
						<th>
							<a class="btn btn-danger" asp-action=DeleteUser asp-route-id=@user.Id>Delete user</a>
						</th>
					</tr>
				}
			</tbody>
		</table>
	}
	else
	{
		<h5>No actual users</h5>
	}
</div>